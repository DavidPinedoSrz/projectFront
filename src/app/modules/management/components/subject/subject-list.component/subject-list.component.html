<div class="card">
    <!-- Buscador -->
    <div class="p-4 bg-gray-50 rounded-lg mb-6">
        <div class="flex flex-col md:flex-row gap-4">
            <div class="flex-1">
                <span class="p-float-label">
                    <input pInputText id="search" [(ngModel)]="searchTerm" (input)="filterSubjects()" class="w-full" />
                    <label for="search">Buscar materias</label>
                </span>
            </div>
            <div>
                <p-button icon="pi pi-filter" label="Filtrar" severity="secondary"
                    (onClick)="filterSubjects()"></p-button>
            </div>
        </div>
    </div>

    <!-- Mensaje cuando no hay resultados -->
    @if (filteredGroups.length === 0) {
    <div class="p-4 text-center text-gray-500">
        <i class="pi pi-info-circle mr-2"></i>
        No se encontraron materias que coincidan con la b√∫squeda
    </div>
    }

    <!-- Tablas agrupadas -->
    @for (group of filteredGroups; track group.area) {
    <div class="mb-8">
        <h2 class="text-xl font-bold mb-4">{{group.area}}</h2>
        <p-table [columns]="cols" [value]="group.subjects" [tableStyle]="{ 'min-width': '50rem' }">
            <ng-template #header let-columns>
                <tr>
                    @for (col of columns; track col.field) {
                    <th>{{ col.header }}</th>
                    }
                </tr>
            </ng-template>
            <ng-template #body let-rowData let-columns="columns">
                <tr>
                    @for (col of columns; track col.field) {
                    <td>{{ rowData[col.field] }}</td>
                    }
                </tr>
            </ng-template>
        </p-table>
    </div>
    }
</div>